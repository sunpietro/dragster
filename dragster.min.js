/*@preserve
 * Dragster - drag'n'drop library v1.6.2
 * https://github.com/sunpietro/dragster
 *
 * Copyright 2015-2017 Piotr Nalepa
 * http://blog.piotrnalepa.pl
 *
 * Released under the MIT license
 * https://github.com/sunpietro/dragster/blob/master/LICENSE
 *
 * Date: 2017-06-28T22:30Z
 */
!function(e,t,n){"use strict";"function"==typeof define&&define.amd?define(t,n):"object"==typeof exports?exports=module.exports=n():e[t]=n()}(this,"Dragster",function(){"use strict";return function(e){function t(){}var n,s,E,L,w,o,y,r,d,C,D,a,l,i,c,m,b,u,g,p,f,h,v,B,T,H,M,N,P,R,S,I,O="dragster-",A="is-dragging",Y=O+"draggable",x=O+"drag-region",X=O+"drop-placeholder",j=O+"temp",k=j+"-container",q=O+"is-hidden",F=O+"replacable",U="touchstart",z="touchmove",J="touchend",W="mousedown",G="mousemove",K="mouseup",Q="top",V="bottom",Z="px",$="div",_=!1,ee=null,te={elementSelector:".dragster-block",regionSelector:".dragster-region",dragHandleCssClass:_,dragOnlyRegionCssClass:O+"region--drag-only",replaceElements:_,updateRegionsHeight:!0,minimumRegionHeight:60,onBeforeDragStart:t,onAfterDragStart:t,onBeforeDragMove:t,onAfterDragMove:t,onBeforeDragEnd:t,onAfterDragEnd:t,onAfterDragDrop:t,scrollWindowOnDrag:_,dragOnlyRegionsEnabled:_,cloneElements:_,wrapDraggableElements:!0,shadowElementUnderMouse:_},ne=_,oe=_,re={drag:{node:ee},drop:{node:ee},shadow:{node:ee,top:0,left:0},placeholder:{node:ee,position:ee},dropped:ee,clonedFrom:ee,clonedTo:ee},ae={},se=window.innerHeight,de=Math.floor(65536*(1+Math.random())).toString(16);for(n in e)Object.prototype.hasOwnProperty.call(e,"key")&&(te[n]=e[n]);return h=function(){return[].slice.call(document.querySelectorAll(te.regionSelector))},v=function(e){if(te.wrapDraggableElements===_)return console.warn("You have disabled the default behavior of wrapping the draggable elements. If you want Dragster.js to work properly you still will have to do this manually.\n\nMore info: https://github.com/sunpietro/dragster/blob/master/README.md#user-content-wrapdraggableelements---boolean"),_;e.forEach(function(e){var t=i(),n=e.parentNode;if(n.classList.contains(Y))return _;n.insertBefore(t,e),n.removeChild(e),t.appendChild(e)})},r=(f=function(){return[].slice.call(document.querySelectorAll(te.elementSelector))})(),s=h(),te.replaceElements&&((o=document.createElement($)).classList.add(q),o.classList.add(k),document.body.appendChild(o)),E=function(e,t){var n=e.parentNode;if(n&&(!e.classList||!e.classList.contains(x)||e.classList.contains(te.dragOnlyRegionCssClass)))return t(e)?e:t(n)?n:E(n,t)},u=function(e){[].slice.call(document.getElementsByClassName(e)).forEach(function(e){e.dataset.dragsterId===de&&e.parentNode.removeChild(e)})},g=function(e,t){t&&(s.forEach(function(e){e.removeEventListener(t,d.mousemove)}),document.body.removeEventListener(t,d.mousemove)),e&&e.classList.remove(A),[].slice.call(document.getElementsByClassName(Y)).forEach(function(e){e.firstChild||e.parentNode.removeChild(e)}),u(X),u(j),B()},p=function(){[].slice.call(document.getElementsByClassName(F)).forEach(function(e){e.classList.remove(F)})},i=function(){var e=document.createElement($);return e.classList.add(Y),e.dataset.dragsterId=de,e},m=function(){var e=document.createElement($);return e.classList.add(X),e.dataset.dragsterId=de,e},c=function(){var e=document.createElement($);return e.classList.add(j),e.classList.add(q),e.style.position="fixed",e.dataset.dragsterId=de,document.body.appendChild(e),e},a=function(e,t){if(e&&e.parentNode){var n=te.wrapDraggableElements===_?e:e.nextSibling;e.parentNode.insertBefore(t,n)}},l=function(e,t){e&&e.parentNode&&e.parentNode.insertBefore(t,e)},C=function(e){return e.classList&&e.classList.contains(Y)&&e.dataset.dragsterId===de},D=function(e){return e.classList&&e.classList.contains(te.dragOnlyRegionCssClass)},B=function(){te.updateRegionsHeight&&[].slice.call(document.getElementsByClassName(x)).forEach(function(e){var t=[].slice.call(e.querySelectorAll(te.elementSelector)),n=te.minimumRegionHeight;t.length&&(t.forEach(function(e){var t=window.getComputedStyle(e);n+=e.offsetHeight+parseInt(t.marginTop,10)+parseInt(t.marginBottom,10)}),e.style.height=n+Z)})},M=function(e,t){g(y,e),g(y,t)},d={mousedown:function(e){if(te.dragHandleCssClass&&("string"!=typeof te.dragHandleCssClass||!e.target.classList.contains(te.dragHandleCssClass)))return _;var t,n,o,r=e.type===U,a=e.changedTouches?e.changedTouches[0]:e;return ae=JSON.parse(JSON.stringify(re)),e.dragster=ae,te.onBeforeDragStart(e)===_||3===e.which?_:(e.preventDefault(),(y=E(e.target,C))?(n=r?z:G,o=r?J:K,s.forEach(function(e){e.addEventListener(n,d.mousemove,_),e.addEventListener(o,d.mouseup,_)}),document.body.addEventListener(n,d.mousemove,_),document.body.addEventListener(o,d.mouseup,_),t=y.getBoundingClientRect(),R=t.left-a.clientX,S=t.top-a.clientY,(L=c()).innerHTML=y.innerHTML,L.style.width=t.width+Z,L.style.height=t.height+Z,L.dataset.dragsterId=de,w=L.getBoundingClientRect(),y.classList.add(A),ae.drag.node=y,ae.shadow.node=L,e.dragster=ae,void te.onAfterDragStart(e)):_)},mousemove:function(e){if(e.dragster=ae,te.onBeforeDragMove(e)===_||!w)return _;e.preventDefault();var t=e.changedTouches?e.changedTouches[0]:e,n=t.view?t.view.pageXOffset:0,o=t.view?t.view.pageYOffset:0,r=t.clientY+o,a=t.clientX+n,s=document.elementFromPoint(t.clientX,t.clientY),d=E(s,C),l=te.shadowElementUnderMouse?t.clientY+S:t.clientY,i=te.shadowElementUnderMouse?a+R:a-w.width/2,c=ae.drag.node&&ae.drag.node.dataset,m=!(!d||!E(d,D)),u=s.dataset.dragsterId===de,g=s.classList.contains(x)&&u,p=s.classList.contains(te.dragOnlyRegionCssClass)&&u,f=s.classList.contains(X),h=0<s.getElementsByClassName(Y).length,v=0<s.getElementsByClassName(X).length;clearTimeout(b),L.style.top=l+Z,L.style.left=i+Z,L.classList.remove(q),ae.shadow.top=l,ae.shadow.left=i,c||g||f?d&&d!==y&&!m?(P.removePlaceholders(),P.addPlaceholderOnTarget(d,r,o)):!g||p||h||v?g&&!p&&h&&!v&&(P.removePlaceholders(),P.addPlaceholderInRegionBelowTargets(s)):(P.removePlaceholders(),P.addPlaceholderInRegion(s)):P.removePlaceholders(),te.scrollWindowOnDrag&&T(e),B(),te.onAfterDragMove(e)},mouseup:function(e){e.dragster=ae;var t,n,o,r,a,s=e.type===U,d=s?z:G,l=s?J:K;return te.onBeforeDragEnd(e)===_?(M(d,l),_):(t=te.replaceElements?F:X,n=document.getElementsByClassName(t)[0],r=!(!y||!E(y,D)),a=te.cloneElements&&r,b=setTimeout(M,200),p(),y&&n?(o=E(n,C),y!==(o=o||n)&&(te.replaceElements||a?te.replaceElements&&!a?(e.dragster=N.replaceElements(e.dragster,o),te.onAfterDragDrop(e)):!te.replaceElements&&a&&(e.dragster=N.cloneElements(e.dragster,n,o),te.onAfterDragDrop(e)):(e.dragster=N.moveElement(e.dragster,n,o),te.onAfterDragDrop(e)),o.classList.remove("is-drag-over")),M(d,l),void te.onAfterDragEnd(e)):(M(d,l),_))}},P={addPlaceholderOnTarget:function(e,t,n){var o=e.getBoundingClientRect(),r=m(),a=o.height/2;p(),te.replaceElements?e.classList.add(F):t-n-o.top<a&&!ne?(u(X),r.dataset.placeholderPosition=Q,l(e.firstChild,r),ae.placeholder.position=Q):o.bottom-(t-n)<a&&!oe&&(u(X),r.dataset.placeholderPosition=V,e.appendChild(r),ae.placeholder.position=V),ae.placeholder.node=r,ae.drop.node=e},addPlaceholderInRegion:function(e){var t=m();e.appendChild(t),ae.placeholder.position=V,ae.placeholder.node=t,ae.drop.node=e},addPlaceholderInRegionBelowTargets:function(e){var t=[].slice.call(e.getElementsByClassName(Y)).filter(function(e){return e.dataset.dragsterId===de}),n=t[t.length-1],o=m();o.dataset.placeholderPosition=V,u(X),n.appendChild(o),ae.placeholder.position=V,ae.placeholder.node=o,ae.drop.node=n},removePlaceholders:function(){te.replaceElements?p():u(X)}},N={moveElement:function(e,t,n){var o=te.wrapDraggableElements===_?y:i();return t.dataset.placeholderPosition===Q?l(n,o):te.wrapDraggableElements===_?a(o,n):a(n,o),y.firstChild&&!0===te.wrapDraggableElements&&o.appendChild(y.firstChild),e.dropped=o,e},replaceElements:function(e,t){var n=document.getElementsByClassName(k)[0];return n.innerHTML=y.innerHTML,y.innerHTML=t.innerHTML,t.innerHTML=n.innerHTML,n.innerHTML="",e.dropped=n,e},cloneElements:function(e,t,n){var o=y.cloneNode(!0);return(t.dataset.placeholderPosition===Q?l:a)(n,o),g(o),e.clonedFrom=y,e.clonedTo=o,e}},T=function(e){var t=e.changedTouches?e.changedTouches[0]:e;se-t.clientY<60?window.scrollBy(0,10):t.clientY<60&&window.scrollBy(0,-10)},H=function(){se=window.innerHeight},v(r),(I=function(){s.forEach(function(e){e.classList.add(x),e.dataset.dragsterId=de,e.addEventListener(W,d.mousedown,_),e.addEventListener(U,d.mousedown,_)})})(),window.addEventListener("resize",H,!1),{update:function(){r=f(),v(r),B(),H()},updateRegions:function(){s=h(),I()},destroy:function(){s.forEach(function(e){e.classList.remove(x),e.removeEventListener(W,d.mousedown,_),e.removeEventListener(G,d.mousemove,_),e.removeEventListener(K,d.mouseup,_),e.removeEventListener(U,d.mousedown,_),e.removeEventListener(z,d.mousemove,_),e.removeEventListener(J,d.mouseup,_)}),document.body.removeEventListener(G,d.mousemove,_),document.body.removeEventListener(z,d.mousemove,_),document.body.removeEventListener(K,d.mouseup,_),document.body.removeEventListener(J,d.mouseup,_),window.removeEventListener("resize",H,!1)}}}});