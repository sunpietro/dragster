/*@preserve
 * Dragster - drag'n'drop library v1.3.2
 * https://github.com/sunpietro/dragster
 *
 * Copyright 2015-2016 Piotr Nalepa
 * http://blog.piotrnalepa.pl
 *
 * Released under the MIT license
 * https://github.com/sunpietro/dragster/blob/master/LICENSE
 *
 * Date: 2016-10-17T20:30Z
 */
!function(e,t){"use strict";e.Dragster=function(n){var o,r,a,s,i,l,d,c,u,g,m,p,f,h,v,E,L,y,C,B,w,D,b,T,N,A,H,S,R,M="dragster-",O="is-dragging",P="is-drag-over",I=M+"draggable",Y=M+"drag-region",q=M+"drop-placeholder",x=M+"temp",F=x+"-container",X=M+"is-hidden",J=M+"replacable",W=M+"region--drag-only",k="touchstart",z="touchmove",j="touchend",G="mousedown",K="mousemove",Q="mouseup",U="top",V="bottom",Z="px",$="div",_=!1,ee=!0,te=function(){},ne={elementSelector:".dragster-block",regionSelector:".dragster-region",dragOnlyRegionCssClass:W,replaceElements:_,updateRegionsHeight:ee,minimumRegionHeight:60,onBeforeDragStart:te,onAfterDragStart:te,onBeforeDragMove:te,onAfterDragMove:te,onBeforeDragEnd:te,onAfterDragEnd:te,onAfterDragDrop:te,scrollWindowOnDrag:_,dragOnlyRegionsEnabled:_,cloneElements:_},oe="draggable",re="data-placeholder-position",ae={top:_,bottom:_},se={drag:{node:{}},drop:{node:{}},shadow:{node:{},top:0,left:0},placeholder:{node:{},position:""},dropped:null,clonedFrom:null,clonedTo:null},ie=e.innerHeight;for(r in n)n.hasOwnProperty(r)&&(ne[r]=n[r]);return b=function(){return[].slice.call(t.querySelectorAll(ne.elementSelector))},T=function(e){e.forEach(function(e){var t=E(),n=e.parentNode;return n.classList.contains(I)?_:(n.insertBefore(t,e),n.removeChild(e),void t.appendChild(e))})},u=b(),a=[].slice.call(t.querySelectorAll(ne.regionSelector)),ne.replaceElements&&(d=t.createElement($),d.classList.add(X),d.classList.add(F),t.body.appendChild(d)),s=function(e,t){var n=e.parentNode;if(n&&(!e.classList||!e.classList.contains(Y)||e.classList.contains(W)))return t(e)?e:t(n)?n:s(n,t)},B=function(e){var n=[].slice.call(t.getElementsByClassName(e));n.forEach(function(e){e.parentNode.removeChild(e)})},w=function(e,n){n&&(a.forEach(function(e){e.removeEventListener(n,g.mousemove)}),t.body.removeEventListener(n,g.mousemove)),e&&e.classList.remove(O),[].slice.call(t.getElementsByClassName(I)).forEach(function(e){e.firstChild||e.parentNode.removeChild(e)}),B(q),B(x),N()},D=function(){[].slice.call(t.getElementsByClassName(J)).forEach(function(e){e.classList.remove(J)})},E=function(){var e=t.createElement($);return e.setAttribute(oe,ee),e.classList.add(I),e},y=function(){var e=t.createElement($);return e.classList.add(q),e},L=function(){var e=t.createElement($);return e.classList.add(x),e.classList.add(X),e.style.position="fixed",t.body.appendChild(e),e},h=function(e,t){e&&e.parentNode&&e.parentNode.insertBefore(t,e.nextSibling)},v=function(e,t){e&&e.parentNode&&e.parentNode.insertBefore(t,e)},p=function(e){return e.classList&&e.classList.contains(I)},m=function(e){return e.classList&&e.classList.contains(q)},f=function(e){return e.classList&&e.classList.contains(ne.dragOnlyRegionCssClass)},N=function(){if(ne.updateRegionsHeight){var n=[].slice.call(t.getElementsByClassName(Y));n.forEach(function(t){var n=[].slice.call(t.querySelectorAll(ne.elementSelector)),o=ne.minimumRegionHeight;n.length&&(n.forEach(function(t){var n=e.getComputedStyle(t);o+=t.offsetHeight+parseInt(n.marginTop,10)+parseInt(n.marginBottom,10)}),t.style.height=o+Z)})}},g={mousedown:function(e){var n,r;return e.dragster=o,ne.onBeforeDragStart(e)===_||3===e.which?_:(e.preventDefault(),r=e.type===k?z:K,a.forEach(function(e){e.addEventListener(r,g.mousemove)}),t.body.addEventListener(r,g.mousemove),(c=s(e.target,p))?(n=c.getBoundingClientRect(),i=L(),i.innerHTML=c.innerHTML,i.style.width=n.width+Z,i.style.height=n.height+Z,l=i.getBoundingClientRect(),c.classList.add(O),o=JSON.parse(JSON.stringify(se)),o.drag.node=c,o.shadow.node=i,e.dragster=o,void ne.onAfterDragStart(e)):_)},mousemove:function(e){if(e.dragster=o,ne.onBeforeDragMove(e)===_)return _;e.preventDefault();var n=e.changedTouches?e.changedTouches[0]:e,r=n.view?n.view.pageXOffset:0,a=n.view?n.view.pageYOffset:0,d=n.clientY+a,u=n.clientX+r,g=t.elementFromPoint(n.clientX,n.clientY),m=s(g,p),h=n.clientY,v=u-l.width/2,E=!(!m||!s(m,f)),L=g.classList.contains(Y),y=g.classList.contains(W),B=g.classList.contains(q),w=g.getElementsByClassName(I).length>0,D=g.getElementsByClassName(q).length>0;clearTimeout(C),i.style.top=h+Z,i.style.left=v+Z,i.classList.remove(X),o.shadow.top=h,o.shadow.left=v,m&&m!==c&&!E?R.addPlaceholderOnTarget(m,d,a):!L||y||w||D?L&&!y&&w&&!D?R.addPlaceholderInRegionBelowTargets(g):L||B||R.removePlaceholders():R.addPlaceholderInRegion(g),ne.scrollWindowOnDrag&&A(e),N(),ne.onAfterDragMove(e)},mouseup:function(e){if(e.dragster=o,ne.onBeforeDragEnd(e)===_)return _;var n,r=ne.replaceElements?J:q,a=t.getElementsByClassName(r)[0],i=!(!c||!s(c,f)),l=e.type===k?z:K,d=ne.cloneElements&&i;return C=setTimeout(function(){w(c,l)},200),D(),c&&a?(n=s(a,p),n=n||a,c!==n&&(ne.replaceElements||d?ne.replaceElements&&!d?(e.dragster=S.replaceElements(e.dragster,n),ne.onAfterDragDrop(e)):!ne.replaceElements&&d&&(e.dragster=S.cloneElements(e.dragster,a,n),ne.onAfterDragDrop(e)):(e.dragster=S.moveElement(e.dragster,a,n),ne.onAfterDragDrop(e)),n.classList.remove(P)),w(c,l),void ne.onAfterDragEnd(e)):(w(c,l),_)}},R={addPlaceholderOnTarget:function(e,t,n){var r=e.getBoundingClientRect(),a=y(),s=r.height/2;D(),ne.replaceElements?e.classList.add(J):t-n-r.top<s&&!ae.top?(B(q),a.setAttribute(re,U),v(e.firstChild,a),o.placeholder.position=U):r.bottom-(t-n)<s&&!ae.bottom&&(B(q),a.setAttribute(re,V),e.appendChild(a),o.placeholder.position=V),o.placeholder.node=a,o.drop.node=e},addPlaceholderInRegion:function(e){var t=y();e.appendChild(t),o.placeholder.position=V,o.placeholder.node=t,o.drop.node=e},addPlaceholderInRegionBelowTargets:function(e){var t=e.getElementsByClassName(I),n=t[t.length-1],r=y();r.setAttribute(re,V),B(q),n.appendChild(r),o.placeholder.position=V,o.placeholder.node=r,o.drop.node=n},removePlaceholders:function(){ne.replaceElements?D():B(q)}},S={moveElement:function(e,t,n){var o=E(),r=t.getAttribute(re);return r===U?v(n,o):h(n,o),c.firstChild&&o.appendChild(c.firstChild),e.dropped=o,e},replaceElements:function(e,n){var o=t.getElementsByClassName(F)[0];return o.innerHTML=c.innerHTML,c.innerHTML=n.innerHTML,n.innerHTML=o.innerHTML,o.innerHTML="",e.dropped=o,e},cloneElements:function(e,t,n){var o=c.cloneNode(!0),r=t.getAttribute(re);return r===U?v(n,o):h(n,o),w(o),e.clonedFrom=c,e.clonedTo=o,e}},A=function(t){var n=t.changedTouches?t.changedTouches[0]:t,o=60;ie-n.clientY<o?e.scrollBy(0,10):n.clientY<o&&e.scrollBy(0,-10)},H=function(){ie=e.innerHeight},T(u),t.body.addEventListener(Q,g.mouseup,_),t.body.addEventListener(j,g.mouseup,_),a.forEach(function(e){e.classList.add(Y),e.addEventListener(G,g.mousedown,_),e.addEventListener(Q,g.mouseup,_),e.addEventListener(k,g.mousedown,_),e.addEventListener(j,g.mouseup,_)}),e.addEventListener("resize",H,!1),{update:function(){T(b()),N(),H()}}}}(window,window.document);